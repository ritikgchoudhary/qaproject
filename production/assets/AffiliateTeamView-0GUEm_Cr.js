import{_ as F,r as b,a as z,c as L,o as A,b as D,d as l,e,w as H,v as R,u as N,n as S,f as a,F as v,g,h as U,i as r,j as $,t as i}from"./index-CGQc33om.js";const q={class:"min-h-screen bg-[#050505] text-white font-sans pb-10"},O={class:"sticky top-0 z-40 bg-black/80 backdrop-blur-xl border-b border-white/5 py-3 px-4 flex items-center gap-3"},G={class:"sticky top-[57px] z-30 bg-[#050505]/95 backdrop-blur-md border-b border-white/5 px-4 py-3 space-y-3"},J={class:"relative"},K={class:"px-4 py-2 flex justify-end"},P={class:"bg-[#111] p-1 rounded-lg border border-white/10 flex gap-1"},Q={class:"px-4 py-2 min-h-[50vh] overflow-x-auto"},W={key:0,class:"flex justify-center py-10"},X={key:1,class:"space-y-4"},Y={class:"node-card border-l-4 border-yellow-500 bg-[#111] p-3 rounded-r-xl border border-white/5 mb-2 relative z-10 transition-all hover:bg-[#151515]"},Z=["onClick"],ee={class:"flex items-center gap-3"},te={class:"relative"},se={key:0,class:"absolute -bottom-6 left-1/2 w-0.5 h-6 bg-white/20 -translate-x-1/2 z-0"},oe={class:"font-bold text-sm text-white flex items-center gap-2"},le={key:0,class:"text-[10px] px-1.5 py-0.5 rounded-full bg-white/10 text-gray-400"},re={class:"text-[10px] text-gray-500"},ne={class:"text-right"},ie={class:"text-[10px] text-white font-bold"},de={class:"text-[9px] text-green-400"},ae={key:0,class:"pl-5 relative"},ue={class:"node-card border-l-4 border-blue-500 bg-[#161616] p-3 rounded-r-xl border border-white/5 relative z-10 transition-all hover:bg-[#1a1a1a]"},ce=["onClick"],pe={class:"flex items-center gap-3"},xe={class:"font-bold text-sm text-white flex items-center gap-2"},he={key:0,class:"text-[8px] px-1.5 py-0.5 rounded-full bg-white/10 text-gray-400"},fe={class:"text-[10px] text-gray-500"},be={class:"text-right"},ve={class:"text-[10px] text-white font-bold"},ge={class:"text-[9px] text-green-400"},we={key:0,class:"pl-5 relative"},me={class:"node-card border-l-4 border-purple-500 bg-[#1a1a1a] p-2 rounded-r-xl border border-white/5 opacity-90"},ye={class:"flex justify-between items-center"},_e={class:"flex items-center gap-2"},ke={class:"font-bold text-xs text-white"},je={class:"text-right"},Ce={class:"text-[9px] text-white"},Me={key:2,class:"org-tree-container pb-10"},Te={class:"tree"},ze=["onClick"],Le={class:"font-bold text-xs text-white truncate max-w-[80px] mx-auto"},Ne={class:"text-[9px] text-gray-400"},Se={key:0,class:"inline-block mt-1 px-2 py-[2px] rounded-full bg-white/10 text-[8px] font-bold"},$e={key:0},Be=["onClick"],Ee={class:"font-bold text-[10px] text-white truncate max-w-[70px] mx-auto"},Ve={key:0,class:"inline-block mt-1 px-1.5 py-[1px] rounded-full bg-white/10 text-[7px]"},Ie={key:0},Fe={class:"tree-card l3"},Ae={class:"font-bold text-[9px] text-white truncate max-w-[60px] mx-auto"},De={key:3,class:"text-center py-10 text-gray-500 relative"},He={key:0,class:"w-6 h-6 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"},Re={__name:"AffiliateTeamView",setup(Ue){function B(n,t){let s;return function(...o){const d=this;clearTimeout(s),s=setTimeout(()=>n.apply(d,o),t)}}const u=b([]),p=b(!1),w=b(null),y=b(!0),C=b(null),x=z(new Set),h=b("list"),c=n=>x.has(n),_=n=>{x.has(n)?x.delete(n):x.add(n)},f=z({search:"",page:1}),m=n=>Number(n).toLocaleString("en-IN",{maximumFractionDigits:2}),M=async(n=!1)=>{if(!p.value){p.value=!0;try{const t={limit:20,page:f.page,search:f.search},s=await U.get("/api/get_agent_team.php",{params:t,withCredentials:!0});if(s.data.success){if(w.value=s.data.my_code,n){const o=s.data.team.filter(d=>!u.value.some(I=>I.id===d.id));u.value=[...u.value,...o],o.forEach(d=>x.add(d.id))}else u.value=s.data.team,s.data.team.forEach(o=>x.add(o.id)),n||window.scrollTo(0,0);y.value=s.data.has_more}}catch(t){console.error(t)}finally{p.value=!1}}},E=()=>{f.page=1,y.value=!0,M(!1)},T=B(()=>{E()},500),V=()=>{y.value&&!p.value&&(f.page++,M(!0))},k=L(()=>{if(!w.value||u.value.length===0)return[];const n={},t=[],s=[...u.value].sort((o,d)=>o.id-d.id);return s.forEach(o=>{o.children=[],n[o.referral_code]=o}),s.forEach(o=>{if(o.referred_by===w.value)t.length<3&&t.push(o);else{const d=n[o.referred_by];d&&d.children.length<3&&d.children.push(o)}}),t});L(()=>{if(!w.value)return[];const n={};return u.value.forEach(t=>n[t.referral_code]=t),u.value.filter(t=>!(t.referred_by===w.value||n[t.referred_by]))});let j;return A(()=>{M(),j=new IntersectionObserver(n=>{n[0].isIntersecting&&y.value&&V()},{threshold:.1}),C.value&&j.observe(C.value)}),D(()=>{j&&j.disconnect()}),(n,t)=>(r(),l("div",q,[e("nav",O,[e("button",{onClick:t[0]||(t[0]=s=>n.$router.back()),class:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t[6]||(t[6]=e("h1",{class:"font-bold text-lg"},"My Squad (Tree)",-1))]),e("div",G,[e("div",J,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 absolute left-3 top-3.5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),H(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>f.search=s),onInput:t[2]||(t[2]=(...s)=>N(T)&&N(T)(...s)),placeholder:"Search team member...",class:"w-full bg-[#111] border border-white/10 rounded-xl pl-9 pr-4 py-3 text-sm text-white focus:outline-none focus:border-yellow-500 transition-colors"},null,544),[[R,f.search]])]),e("div",K,[e("div",P,[e("button",{onClick:t[3]||(t[3]=s=>h.value="list"),class:S([h.value==="list"?"bg-yellow-500 text-black":"text-gray-500 hover:text-white","p-2 rounded-md transition-all"])},[...t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2),e("button",{onClick:t[4]||(t[4]=s=>h.value="org"),class:S([h.value==="org"?"bg-yellow-500 text-black":"text-gray-500 hover:text-white","p-2 rounded-md transition-all"])},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1)])],2)])])]),e("div",Q,[p.value&&u.value.length===0?(r(),l("div",W,[...t[10]||(t[10]=[e("div",{class:"w-8 h-8 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):h.value==="list"&&k.value.length>0?(r(),l("div",X,[(r(!0),l(v,null,g(k.value,s=>(r(),l("div",{key:s.id,class:"tree-node relative"},[e("div",Y,[e("div",{class:"flex justify-between items-start cursor-pointer",onClick:o=>_(s.id)},[e("div",ee,[e("div",te,[t[11]||(t[11]=e("div",{class:"w-10 h-10 rounded-full bg-yellow-500/10 text-yellow-500 flex items-center justify-center font-bold text-sm border border-yellow-500/20 z-10 relative"}," L1 ",-1)),s.children.length>0&&c(s.id)?(r(),l("div",se)):a("",!0)]),e("div",null,[e("h4",oe,[$(i(s.name)+" ",1),s.children.length>0?(r(),l("span",le,i(c(s.id)?"−":"+")+" "+i(s.children.length),1)):a("",!0)]),e("p",re,"Ref: "+i(s.referral_code),1)])]),e("div",ne,[e("p",ie,"₹"+i(m(s.total_deposit)),1),e("p",de,"+₹"+i(m(s.earned_from)),1)])],8,Z)]),s.children.length>0&&c(s.id)?(r(),l("div",ae,[t[17]||(t[17]=e("div",{class:"absolute top-[-10px] left-[22px] bottom-4 w-0.5 bg-white/10 z-0"},null,-1)),(r(!0),l(v,null,g(s.children,o=>(r(),l("div",{key:o.id,class:"relative pl-6 pt-3"},[t[16]||(t[16]=e("div",{class:"absolute top-[28px] left-0.5 w-[22px] h-0.5 bg-white/10 rounded-bl-xl"},null,-1)),e("div",ue,[e("div",{class:"flex justify-between items-start cursor-pointer",onClick:d=>_(o.id)},[e("div",pe,[t[12]||(t[12]=e("div",{class:"w-8 h-8 rounded-full bg-blue-500/10 text-blue-500 flex items-center justify-center font-bold text-xs border border-blue-500/20"},"L2",-1)),e("div",null,[e("h4",xe,[$(i(o.name)+" ",1),o.children.length>0?(r(),l("span",he,i(c(o.id)?"−":"+")+" "+i(o.children.length),1)):a("",!0)]),e("p",fe,"From: "+i(s.name),1)])]),e("div",be,[e("p",ve,"₹"+i(m(o.total_deposit)),1),e("p",ge,"+₹"+i(m(o.earned_from)),1)])],8,ce)]),o.children.length>0&&c(o.id)?(r(),l("div",we,[t[15]||(t[15]=e("div",{class:"absolute top-[-10px] left-[18px] bottom-4 w-0.5 bg-white/10 z-0"},null,-1)),(r(!0),l(v,null,g(o.children,d=>(r(),l("div",{key:d.id,class:"relative pl-6 pt-3"},[t[14]||(t[14]=e("div",{class:"absolute top-[22px] left-[-3px] w-[22px] h-0.5 bg-white/10"},null,-1)),e("div",me,[e("div",ye,[e("div",_e,[t[13]||(t[13]=e("div",{class:"w-6 h-6 rounded-full bg-purple-500/10 text-purple-500 flex items-center justify-center font-bold text-[10px] border border-purple-500/20"},"L3",-1)),e("div",null,[e("h4",ke,i(d.name),1)])]),e("div",je,[e("p",Ce,"Dep: ₹"+i(m(d.total_deposit)),1)])])])]))),128))])):a("",!0)]))),128))])):a("",!0)]))),128))])):h.value==="org"&&k.value.length>0?(r(),l("div",Me,[e("div",Te,[e("ul",null,[(r(!0),l(v,null,g(k.value,s=>(r(),l("li",{key:s.id},[e("div",{class:"tree-card l1 cursor-pointer",onClick:o=>_(s.id)},[t[18]||(t[18]=e("div",{class:"absolute top-1 right-1 w-2 h-2 rounded-full bg-green-500 animate-pulse"},null,-1)),t[19]||(t[19]=e("div",{class:"w-12 h-12 mx-auto rounded-full p-[2px] bg-gradient-to-br from-yellow-400 to-yellow-600 mb-2"},[e("div",{class:"w-full h-full rounded-full bg-black flex items-center justify-center font-bold text-yellow-500"},"L1")],-1)),e("h4",Le,i(s.name),1),e("p",Ne,"Ref: "+i(s.referral_code),1),s.children.length>0?(r(),l("span",Se,i(c(s.id)?"Hide":"Show")+" "+i(s.children.length),1)):a("",!0)],8,ze),s.children.length>0&&c(s.id)?(r(),l("ul",$e,[(r(!0),l(v,null,g(s.children,o=>(r(),l("li",{key:o.id},[e("div",{class:"tree-card l2 cursor-pointer",onClick:d=>_(o.id)},[t[20]||(t[20]=e("div",{class:"w-10 h-10 mx-auto rounded-full p-[1px] bg-blue-500/50 mb-1"},[e("div",{class:"w-full h-full rounded-full bg-black flex items-center justify-center font-bold text-blue-500 text-[10px]"},"L2")],-1)),e("h4",Ee,i(o.name),1),o.children.length>0?(r(),l("span",Ve,i(o.children.length)+" Subs ",1)):a("",!0)],8,Be),o.children.length>0&&c(o.id)?(r(),l("ul",Ie,[(r(!0),l(v,null,g(o.children,d=>(r(),l("li",{key:d.id},[e("div",Fe,[t[21]||(t[21]=e("div",{class:"w-8 h-8 mx-auto rounded-full p-[1px] bg-purple-500/50 mb-1"},[e("div",{class:"w-full h-full rounded-full bg-black flex items-center justify-center font-bold text-purple-500 text-[9px]"},"L3")],-1)),e("h4",Ae,i(d.name),1)])]))),128))])):a("",!0)]))),128))])):a("",!0)]))),128))])])])):p.value?a("",!0):(r(),l("div",De,[...t[22]||(t[22]=[e("div",{class:"absolute inset-0 flex items-center justify-center opacity-30 pointer-events-none"},[e("img",{src:"https://img.icons8.com/3d-fluency/94/confetti.png",class:"w-24 grayscale"})],-1),e("p",null,"No team members found.",-1),e("p",{class:"text-xs mt-2"},"Start inviting to build your tree!",-1)])])),e("div",{ref_key:"loadTrigger",ref:C,class:"h-10 mt-4 flex justify-center"},[p.value&&u.value.length>0?(r(),l("div",He)):a("",!0)],512)])]))}},Oe=F(Re,[["__scopeId","data-v-f8c1817b"]]);export{Oe as default};
